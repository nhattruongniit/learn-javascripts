<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja" dir="ltr" xmlns:og="http://ogp.me/ns#" xmlns:fb="http://www.facebook.com/2008/fbml">

<head>
    <title>Date Time</title>
</head>

<body>
    <!-- Slideshow container -->
    <p>matrixCreate</p>
   
    <script type="text/javascript">
      const campaigns = {
        id: "3009c9c1-7df1-4a1f-9f8b-75079a4f4c5e",
        creativeSets: [
          {
            id: "8cfe60ee-eea6-4521-bb05-b89d0ff29b06",
            file_types: ["png", "jpg", "jpeg", "gif"],
            type: "tabletLandscape",
          },
          {
            id: "870318ef-a77e-46a8-817c-5c793ce1edd6",
            file_types: ["video"],
            type: "video",
          },
          {
            id: "2b93101f-94ea-4ada-bc7d-9bd351065f4e",
            file_types: ["png", "jpg", "jpeg", "gif"],
            type: "phonePortrait",
          },
          {
            id: "6f70c7da-0d64-4e02-bef3-729808b32ffa",
            file_types: ["png", "jpg", "jpeg", "gif"],
            type: "phoneLandscape",
          },
          {
            id: "ef2f3583-533f-4500-83dc-87152764aa27",
            file_types: ["png", "jpg", "jpeg", "gif"],
            type: "tabletPortrait",
          },
          
        ]
      }

      const creatives = [
        {
          file_type: "png",
          id: "1Nrjhr2E8ETvW0ddLAA04qa3PGohCj98y",
          name: "540x960.png",
        },
        {
          file_type: "png",
          id: "18eRJB9PQJPuE8CbxIZtd9_lRu_HCvooc",
          name: "1024x768.png",
        },
        {
          file_type: "png",
          id: "1H6MJkJHYhgS8HqpklkhkftlCB5XBwXiT",
          name: "768x1024.png",
        },
        {
          file_type: "video",
          id: "1mtOKpB1SmbVas4UkbA8Oe0mb6mE573kt",
          name: "video 1",
        },
        {
          file_type: "png",
          id: "1igHdxKYeS2K1eBMGadCMPMPLS3Adb3OY",
          name: "960x540.png",
        },
      ]

      const clonedCampaigns = JSON.parse(JSON.stringify(campaigns));
      
      let index = 0;
      function recursion(creatives, creativeSets) {
          if(index >= campaigns.creativeSets.length) return;
          const creativeItem = creatives.find(creative => {
            return creativeSets[index].file_types.includes(creative.file_type)
          })
          const createSetItem = campaigns.creativeSets.find(campaignCreative => {
              return campaignCreative.id === creativeSets[index].id
          })
          if(creativeItem && !createSetItem.creative) {
            createSetItem.creatives = creativeItem
            index++;
            creatives.splice(creatives.indexOf(creativeItem), 1)
            recursion(creatives, clonedCampaigns.creativeSets)
          } else {
            index++;
            recursion(creatives, clonedCampaigns.creativeSets)
          }
      }
      console.log("creatives: ", creatives)
      console.log("campaigns : ", campaigns)
      console.log("clonedCampaigns: ", clonedCampaigns)
      recursion(creatives, clonedCampaigns.creativeSets)
    
    </script>
</body>

</html>